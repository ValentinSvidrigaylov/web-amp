(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[275],{6898:function(e,t,o){Promise.resolve().then(o.bind(o,2150))},2150:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return Synth}});var n=o(7437),c=o(8518),s=o.n(c),l=o(7707),i=o(2265);function Synth(){let[e,t]=(0,i.useState)();console.log("initial octave: ",e);let[o,c]=(0,i.useState)(),a=0;return(0,i.useEffect)(()=>{localStorage&&(console.log("rendered"),t(Number(localStorage.getItem("octave"))||1),console.log(localStorage),c(Number(localStorage.getItem("keysLength"))||12))},[]),(0,i.useEffect)(()=>{let t;let n=new l.S9(100).toDestination();var c=new l.bK(4,5,1).toDestination().start();let s=new l.Z4({urls:{C4:"C4.mp3","D#4":"Ds4.mp3","F#4":"Fs4.mp3",A4:"A4.mp3"},release:1,baseUrl:"./samples/guitar-electric/"}).toDestination().connect(new l.df(.95).connect(n).toMaster()).connect(c),i=[0,2,1,4,3,5,7,6,9,8,11,10];document.getElementById("keysValue"),document.getElementById("octaveValue");let r=JSON.parse(localStorage.getItem("notes"))||(localStorage.setItem("notes",JSON.stringify(["C","D","C#","E","D#","F","G","F#","A","G#","B","A#"])),["C","D","C#","E","D#","F","G","F#","A","G#","B","A#"]),d=r.filter(e=>!e.includes("#"));r.filter(e=>e.includes("#"));let g=document.querySelector("div#synth");function getKeysByValue(e,t){return Object.keys(e).filter(o=>e[o]===t)}(function(){g.innerHTML="",t=null,(t=document.createElementNS("http://www.w3.org/2000/svg","svg")).id="synthsvg";for(let n=0;n<o;n++){let o;r[n%12].includes("#")?((o=document.createElementNS("http://www.w3.org/2000/svg","rect")).setAttribute("width",35),o.setAttribute("height",180),o.setAttribute("stroke","black"),o.setAttribute("stroke-width",2.5),o.setAttribute("fill","black"),o.classList.add("semi-tone"),o.setAttribute("x",385*a+55*r.slice(0,r.indexOf(r[i[n%12]])).filter(e=>!e.includes("#")).length-17.5+1.25)):((o=document.createElementNS("http://www.w3.org/2000/svg","rect")).setAttribute("width",55),o.setAttribute("height",280),o.setAttribute("stroke","black"),o.setAttribute("stroke-width",2.5),o.setAttribute("fill","white"),o.classList.add("tone"),o.setAttribute("rx",10),o.setAttribute("x",385*a+55*d.indexOf(r[n%12])+1.25)),o.setAttribute("y",1.25),t.appendChild(o);let c=a;console.log("".concat(r[[...t.children].indexOf(o)-12*c])+"".concat(e+c)),console.log(n),o.onmousedown=n=>{n.stopPropagation(),void 0==o.getAttribute("isPressed")&&(o.setAttribute("isPressed",""),s.triggerAttack("".concat(r[[...t.children].indexOf(o)-12*c])+"".concat(e+c),l.zO())),console.log("".concat(r[[...t.children].indexOf(o)-12*c])+"".concat(e+c))},o.onmouseup=n=>{n.stopPropagation(),void 0!=o.getAttribute("isPressed")&&(o.removeAttribute("isPressed"),s.triggerRelease("".concat(r[[...t.children].indexOf(o)-12*c])+"".concat(e+c),l.zO())),console.log("".concat(r[[...t.children].indexOf(o)-12*c])+"".concat(e+c))},o.onmouseleave=n=>{n.stopPropagation(),s.triggerRelease("".concat(r[[...t.children].indexOf(o)-12*c])+"".concat(e+c),l.zO())},o.ontouchstart=n=>{n.stopPropagation(),s.triggerAttack("".concat(r[[...t.children].indexOf(o)-12*c])+"".concat(e+c),l.zO()),console.log("".concat(r[[...t.children].indexOf(o)-12*c])+"".concat(e+c))},o.ontouchend=n=>{n.stopPropagation(),s.triggerRelease("".concat(r[[...t.children].indexOf(o)-12*c])+"".concat(e+c),l.zO()),console.log("".concat(r[[...t.children].indexOf(o)-12*c])+"".concat(e+c))},(n+1)%12==0&&0!=n&&a++}t.setAttribute("width",55*[...t.children].filter(e=>e.classList.contains("tone")).length+2.5),t.setAttribute("height",282.5),g.appendChild(t)})(),window.onkeydown=e=>{e.stopPropagation();let o=JSON.parse(localStorage.getItem("keys"))||(localStorage.setItem("keys",JSON.stringify(["q","w","e","r","t","y","u","i","o","p","[","]"])),["q","w","e","r","t","y","u","i","o","p","[","]"]);console.log(o);let n=getKeysByValue(o,e.key.toLowerCase());if(console.log(e.key.toLowerCase()),void 0!=n)for(let e=0;e<n.length;e++){let o=Number(n[e])-Number(n[e])%12+i[n[e]%12];console.log("key",n),console.log("mapped",o),t.children[o].dispatchEvent(new Event("mousedown")),console.log(t.children[o].getAttribute("isPressed"))}},window.onkeyup=e=>{e.stopPropagation();let o=getKeysByValue(JSON.parse(localStorage.getItem("keys"))||(localStorage.setItem("keys",["q","w","e","r","t","y","u","i","o","p","[","]"]),JSON.stringify(["q","w","e","r","t","y","u","i","o","p","[","]"])),e.key.toLowerCase());if(console.log(e.key.toLowerCase()),void 0!=o)for(let e=0;e<o.length;e++){let n=Number(o[e])-Number(o[e])%12+i[o[e]%12];console.log("key",o),console.log("mapped",n),t.children[n].dispatchEvent(new Event("mouseup")),console.log(t.children[n].getAttribute("isPressed"))}}},[]),(0,i.useEffect)(()=>{console.log(void 0==e),void 0!=e&&(localStorage.setItem("octave",e),console.log("local o",localStorage.getItem("octave")),console.log("o",e))},[e]),(0,i.useEffect)(()=>{void 0!=o&&(localStorage.setItem("keysLength",o),console.log("local ks",localStorage.getItem("keysLength")),console.log("ks",o))},[o]),(0,n.jsxs)("main",{children:[(0,n.jsxs)("div",{className:s().description,children:["Simple digital synth based on ",(0,n.jsx)("a",{href:"https://tonejs.github.io/",target:"blank",children:"tone js"})]}),(0,n.jsxs)("div",{className:"center-block container",children:[(0,n.jsxs)("h2",{id:"octaveValue",className:"text-center",children:["Least octave: ",e]}),(0,n.jsxs)("div",{className:"row",children:[(0,n.jsx)("div",{className:"col",children:(0,n.jsx)("button",{id:"octave+",className:"center-block",onClick:function(){e+a>=7||t(e+1)},children:"octave+"})}),(0,n.jsx)("div",{className:"col",children:(0,n.jsx)("button",{id:"octave-",className:"center-block",onClick:function(){e<1||t(e-1)},children:"octave-"})})]})]}),(0,n.jsxs)("div",{className:"center-block container",children:[(0,n.jsxs)("h2",{id:"keysValue",className:"text-center",children:["Keys: ",o]}),(0,n.jsxs)("div",{className:"row",children:[(0,n.jsx)("div",{className:"col",children:(0,n.jsx)("button",{id:"key+",className:"center-block",onClick:function(){o>=48||c(o+1)},children:"add key"})}),(0,n.jsx)("div",{className:"col",children:(0,n.jsx)("button",{id:"key-",className:"center-block",onClick:function(){o<1||c(o-1)},children:"remove key"})})]})]}),(0,n.jsx)("div",{id:"synth",className:"container"})]})}},8518:function(e){e.exports={main:"page_main__nw1Wk",description:"page_description__lvaOp",code:"page_code__9AfUJ",grid:"page_grid__JZ9Cz",card:"page_card__Cf__u",center:"page_center__NcdcW",logo:"page_logo__ikIZE",content:"page_content___38fW",vercelLogo:"page_vercelLogo__YYFl1",rotate:"page_rotate__xIioM"}}},function(e){e.O(0,[738,971,864,744],function(){return e(e.s=6898)}),_N_E=e.O()}]);