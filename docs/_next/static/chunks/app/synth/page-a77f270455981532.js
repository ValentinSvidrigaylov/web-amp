(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[275],{6898:function(e,t,r){Promise.resolve().then(r.bind(r,5982))},9691:function(e,t,r){"use strict";r.d(t,{d:function(){return getKeysByValue}});var n=r(599);function getKeysByValue(e,t){return Object.keys(e).filter(function(r){return e[r]===t}).map(function(e){return Number(e)})}Array.prototype.move=function(e,t){this.splice(t,0,this.splice(e,1)[0])},Array.prototype.toMoved=function(e,t){var r=(0,n.Z)(this);return r.splice(t,0,r.splice(e,1)[0]),r},Array.prototype.insert=function(e,t){this.splice(t,0,e)},Array.prototype.equals,Array.prototype.equals=function(e){if(!e)return!1;if(e===this)return!0;if(this.length!=e.length)return!1;for(var t=0,r=this.length;t<r;t++)if(this[t]instanceof Array&&e[t]instanceof Array){if(!this[t].equals(e[t]))return!1}else if(this[t]!=e[t])return!1;return!0},Object.defineProperty(Array.prototype,"equals",{enumerable:!1}),Number.prototype.fromExponent=function(){var e=String(this).split(/[eE]/);if(1==e.length)return e[0];var t="",r=e[0].replace(".",""),n=Number(e[1])+1;if(n<0){for(t=(this<0?"-":"")+"0.";n++;)t+="0";return t+r.replace(/^\-/,"")}for(n-=r.length;n--;)t+="0";return r+t},Number.prototype.clamp=function(e,t){return Math.min(Math.max(this,e),t)}},5982:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Synth}});var n=r(7022),o=r(599),i=r(8518),s=r.n(i),a=r(7707),c=r(2265);r(4033);var l=r(9691);r(9618),r(9629);var u=r(7437);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Synth(){var e,t,r,i,d=(0,c.useState)(),p=d[0],m=d[1],h=(0,c.useState)(),g=h[0],f=h[1],v=(0,c.useState)(function(){return function(){}}),y=v[0],b=v[1],w=(0,c.useState)(function(){return function(){}}),x=w[0],k=w[1],S=(0,c.useState)(0),A=S[0],N=S[1],O=(0,c.useState)(0),j=O[0],C=O[1],_=0;a.Do.lookAhead=0;var E=[0,2,1,4,3,5,7,6,9,8,11,10];function increaseOctave(){var e=Number(localStorage.getItem("octave"))||3;e+_>=7||m(e+1)}function decreaseOctave(){var e=Number(localStorage.getItem("octave"))||3;e<1||m(e-1)}function renderSampler(){var e=document.getElementById("samples");e.innerHTML="";var t=JSON.parse(localStorage.getItem("samples"))||(localStorage.setItem("samples",JSON.stringify({})),{});for(var r in t){var n=document.createElement("div"),o=document.createElement("h3");o.style.cssText="text-align: center",o.textContent=r;var i=document.createElement("div");i.style.cssText="width: 80%; height: 8rlh; border: 2px dashed var(--nav-background); display: block; margin: 0.6rlh auto;",n.appendChild(o),n.appendChild(i),e.appendChild(n)}}return(0,c.useEffect)(function(){var n=new a.Z4({urls:{C4:"C4.mp3","D#4":"Ds4.mp3","F#4":"Fs4.mp3",A4:"A4.mp3"},release:1,baseUrl:"./samples/piano/"}).toDestination().toDestination();return document.getElementById("keysValue"),document.getElementById("octaveValue"),t=(e=JSON.parse(localStorage.getItem("notes"))||(localStorage.setItem("notes",JSON.stringify(["C","D","C#","E","D#","F","G","F#","A","G#","B","A#"])),["C","D","C#","E","D#","F","G","F#","A","G#","B","A#"])).filter(function(e){return!e.includes("#")}),e.filter(function(e){return e.includes("#")}),r=document.querySelector("div#synth"),k(function(){return function(e){}}),b(function(){return function(s,c,u){switch(void 0!=u&&(r.innerHTML="",i=null),u){case"piano":n=new a.Z4({urls:{C4:"C4.mp3","D#4":"Ds4.mp3","F#4":"Fs4.mp3",A4:"A4.mp3"},release:1,baseUrl:"./samples/piano/"}).toDestination().toDestination(),_=0,(i=document.createElementNS("http://www.w3.org/2000/svg","svg")).id="synthsvg";for(var d=0;d<c;d++)!function(r){var c=void 0;e[r%12].includes("#")?((c=document.createElementNS("http://www.w3.org/2000/svg","rect")).setAttribute("width",35),c.setAttribute("height",180),c.setAttribute("stroke","black"),c.setAttribute("stroke-width",2.5),c.setAttribute("fill","black"),c.classList.add("semi-tone"),c.setAttribute("x",385*_+55*e.slice(0,e.indexOf(e[E[r%12]])).filter(function(e){return!e.includes("#")}).length-17.5+1.25)):((c=document.createElementNS("http://www.w3.org/2000/svg","rect")).setAttribute("width",55),c.setAttribute("height",280),c.setAttribute("stroke","black"),c.setAttribute("stroke-width",2.5),c.setAttribute("fill","white"),c.classList.add("tone"),c.setAttribute("rx",10),c.setAttribute("x",385*_+55*t.indexOf(e[r%12])+1.25)),c.setAttribute("y",1.25),i.appendChild(c);var l=_;s=Number(s),c.onmousedown=function(t){t.stopPropagation(),void 0==c.getAttribute("isPressed")&&(c.setAttribute("isPressed",""),n.triggerAttack("".concat(e[(0,o.Z)(i.children).indexOf(c)-12*l])+"".concat(s+l),a.Do.currentTime),i.children[(0,o.Z)(i.children).indexOf(c)].style.transform="rotateX(15deg)")},c.onmouseup=function(t){t.stopPropagation(),void 0!=c.getAttribute("isPressed")&&(c.removeAttribute("isPressed"),n.triggerRelease("".concat(e[(0,o.Z)(i.children).indexOf(c)-12*l])+"".concat(s+l),a.Do.currentTime),i.children[(0,o.Z)(i.children).indexOf(c)].style.transform="")},c.onmouseleave=function(t){t.stopPropagation(),n.triggerRelease("".concat(e[(0,o.Z)(i.children).indexOf(c)-12*l])+"".concat(s+l),a.Do.currentTime),i.children[(0,o.Z)(i.children).indexOf(c)].style.transform=""},c.ontouchstart=function(e){e.stopPropagation(),e.preventDefault(),c.onmousedown(e)},c.ontouchend=c.ontouchcancel=function(e){e.stopPropagation(),e.preventDefault(),c.onmouseup(e)},(r+1)%12==0&&0!=r&&_++}(d);i.setAttribute("viewBox","0 0 ".concat(55*(0,o.Z)(i.children).filter(function(e){return e.classList.contains("tone")}).length+5," ").concat(285)),r.appendChild(i),window.onkeydown=function(e){var t=JSON.parse(localStorage.getItem("octavechangekeys"))||[];if((0,l.d)(t,e.key.toLowerCase()).length>0)e.key.toLowerCase()==t[0]?increaseOctave():decreaseOctave();else{e.stopPropagation();var r=JSON.parse(localStorage.getItem("keys"))||(localStorage.setItem("keys",JSON.stringify(["q","w","e","r","t","y","u","i","o","p","[","]"])),["q","w","e","r","t","y","u","i","o","p","[","]"]),n=(0,l.d)(r,e.key.toLowerCase());if(void 0!=n)for(var o=0;o<n.length;o++){var s=Number(n[o])-Number(n[o])%12+E[n[o]%12];i.children[s].dispatchEvent(new Event("mousedown"))}}},window.onkeyup=function(e){e.stopPropagation();var t=JSON.parse(localStorage.getItem("keys"))||(localStorage.setItem("keys",JSON.stringify(["q","w","e","r","t","y","u","i","o","p","[","]"])),JSON.stringify(["q","w","e","r","t","y","u","i","o","p","[","]"])),r=(0,l.d)(t,e.key.toLowerCase());if(void 0!=r)for(var n=0;n<r.length;n++){var o=Number(r[n])-Number(r[n])%12+E[r[n]%12];i.children[o].dispatchEvent(new Event("mouseup")),i.children[o].style.transform=""}};break;case"drums":n=new a.Z4({urls:{F3:"F3.wav",G3:"G3.wav",A3:"A3.wav",B3:"B3.wav",C4:"C4.wav",D4:"D4.wav",F4:"F4.wav","F#4":"Fs4.wav",G4:"G4.wav",C5:"C5.wav",A5:"A5.wav"},release:1,baseUrl:"./samples/drums/"}).toDestination().toDestination(),_=0,(i=document.createElementNS("http://www.w3.org/2000/svg","svg")).id="synthsvg";for(var p=0;p<c;p++)!function(r){var c=void 0;e[r%12].includes("#")?((c=document.createElementNS("http://www.w3.org/2000/svg","rect")).setAttribute("width",35),c.setAttribute("height",180),c.setAttribute("stroke","black"),c.setAttribute("stroke-width",2.5),c.setAttribute("fill","black"),c.classList.add("semi-tone"),c.setAttribute("x",385*_+55*e.slice(0,e.indexOf(e[E[r%12]])).filter(function(e){return!e.includes("#")}).length-17.5+1.25)):((c=document.createElementNS("http://www.w3.org/2000/svg","rect")).setAttribute("width",55),c.setAttribute("height",280),c.setAttribute("stroke","black"),c.setAttribute("stroke-width",2.5),c.setAttribute("fill","white"),c.classList.add("tone"),c.setAttribute("rx",10),c.setAttribute("x",385*_+55*t.indexOf(e[r%12])+1.25)),c.setAttribute("y",1.25),i.appendChild(c);var l=_;s=Number(s),c.onmousedown=function(t){t.stopPropagation(),void 0==c.getAttribute("isPressed")&&(c.setAttribute("isPressed",""),n.triggerAttack("".concat(e[(0,o.Z)(i.children).indexOf(c)-12*l])+"".concat(s+l),a.Do.currentTime),i.children[(0,o.Z)(i.children).indexOf(c)].style.transform="rotateX(15deg)")},c.onmouseup=function(t){t.stopPropagation(),void 0!=c.getAttribute("isPressed")&&(c.removeAttribute("isPressed"),n.triggerRelease("".concat(e[(0,o.Z)(i.children).indexOf(c)-12*l])+"".concat(s+l),a.Do.currentTime),i.children[(0,o.Z)(i.children).indexOf(c)].style.transform="")},c.onmouseleave=function(t){t.stopPropagation(),n.triggerRelease("".concat(e[(0,o.Z)(i.children).indexOf(c)-12*l])+"".concat(s+l),a.Do.currentTime),i.children[(0,o.Z)(i.children).indexOf(c)].style.transform=""},c.ontouchstart=function(e){e.stopPropagation(),e.preventDefault(),c.onmousedown(e)},c.ontouchend=c.ontouchcancel=function(e){e.stopPropagation(),e.preventDefault(),c.onmouseup(e)},(r+1)%12==0&&0!=r&&_++}(p);i.setAttribute("viewBox","0 0 ".concat(55*(0,o.Z)(i.children).filter(function(e){return e.classList.contains("tone")}).length+5," ").concat(285)),r.appendChild(i),window.onkeydown=function(e){var t=JSON.parse(localStorage.getItem("octavechangekeys"))||[];if((0,l.d)(t,e.key.toLowerCase()).length>0)e.key.toLowerCase()==t[0]?increaseOctave():decreaseOctave();else{e.stopPropagation();var r=JSON.parse(localStorage.getItem("keys"))||(localStorage.setItem("keys",JSON.stringify(["q","w","e","r","t","y","u","i","o","p","[","]"])),["q","w","e","r","t","y","u","i","o","p","[","]"]),n=(0,l.d)(r,e.key.toLowerCase());if(void 0!=n)for(var o=0;o<n.length;o++){var s=Number(n[o])-Number(n[o])%12+E[n[o]%12];i.children[s].dispatchEvent(new Event("mousedown"))}}},window.onkeyup=function(e){e.stopPropagation();var t=JSON.parse(localStorage.getItem("keys"))||(localStorage.setItem("keys",JSON.stringify(["q","w","e","r","t","y","u","i","o","p","[","]"])),JSON.stringify(["q","w","e","r","t","y","u","i","o","p","[","]"])),r=(0,l.d)(t,e.key.toLowerCase());if(void 0!=r)for(var n=0;n<r.length;n++){var o=Number(r[n])-Number(r[n])%12+E[r[n]%12];i.children[o].dispatchEvent(new Event("mouseup")),i.children[o].style.transform=""}}}}}),localStorage&&(m(Number(localStorage.getItem("octave"))||3),f(Number(localStorage.getItem("keysLength"))||12)),function(){window.onkeydown=null,window.onkeyup=null,n.releaseAll(0)}},[]),(0,c.useEffect)(function(){void 0!=p&&void 0!=y&&(localStorage.setItem("octave",p),y(p,g,"piano"))},[p]),(0,c.useEffect)(function(){void 0!=g&&void 0!=y&&(localStorage.setItem("keysLength",g),x(p),y(p,g,"piano"))},[g]),(0,c.useEffect)(function(){y(p,g)},[y]),(0,c.useEffect)(function(){renderSampler()},[]),(0,u.jsxs)("main",{className:s().main,children:[(0,u.jsx)("div",{className:[s().description,"center-block text-center m-2"],style:{lineHeight:"3rem"},children:(0,u.jsxs)("span",{children:["Simple digital synth based on ",(0,u.jsx)("h5",{children:(0,u.jsx)("a",{href:"https://tonejs.github.io/",target:"blank",children:"tone js"})})]})}),(0,u.jsxs)("div",{children:[(0,u.jsx)("span",{children:"Switch preset:"}),(0,u.jsxs)("select",{name:"presets",id:"presets",onChangeCapture:function(e){y(localStorage.getItem("octave")||3,localStorage.getItem("keysLength")||12,e.target.value)},children:[(0,u.jsx)("option",{value:"piano",children:"Piano"}),(0,u.jsx)("option",{value:"drums",children:"Drums"})]}),(0,u.jsx)("br",{}),(0,u.jsx)("span",{className:s().description,children:"*drums octaves are 3 and 4 (with no percussion)"})]}),(0,u.jsxs)("div",{className:"center-block container",children:[(0,u.jsxs)("h2",{id:"octaveValue",className:"text-center",children:["Least octave: ",p]}),(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col",children:(0,u.jsx)("button",{id:"octave+",className:"center-block",onClick:increaseOctave,children:"octave+"})}),(0,u.jsx)("div",{className:"col",children:(0,u.jsx)("button",{id:"octave-",className:"center-block",onClick:decreaseOctave,children:"octave-"})})]})]}),(0,u.jsxs)("div",{className:"center-block container",children:[(0,u.jsxs)("h2",{id:"keysValue",className:"text-center",children:["Keys: ",g]}),(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col",children:(0,u.jsx)("button",{id:"key+",className:"center-block",onClick:function(){g>=48||f(g+1)},children:"add key"})}),(0,u.jsx)("div",{className:"col",children:(0,u.jsx)("button",{id:"key-",className:"center-block",onClick:function(){g<1||f(g-1)},children:"remove key"})})]})]}),(0,u.jsxs)("div",{id:"sampler",style:{border:"3px solid black",borderRadius:"15px",background:"color-mix(in srgb, var(--background) 90%, white)",zIndex:"2147483647 !important",margin:"1.5rlh 0",padding:"0.5rlh",width:"80vw"},children:[(0,u.jsx)("span",{style:{textAlign:"center",display:"block",margin:"0.4rlh auto"},children:"Drum machine (not implemented)"}),(0,u.jsxs)("div",{id:"samplerouter",style:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},children:[(0,u.jsxs)("div",{id:"BPMTapper",children:[(0,u.jsx)("input",{onChangeCapture:function(e){N(e.target.value)},value:A}),(0,u.jsx)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",border:"3px solid var(--nav-background)",borderRadius:"10%",height:"6rlh",width:"6rlh",textAlign:"center",verticalAlign:"middle"},onClick:function(e){j&&N(Math.round(6e4/(e.timeStamp-j))),C(e.timeStamp)},children:"Tap"})]}),(0,u.jsxs)("form",{onSubmitCapture:function(e){var t,r;return e.preventDefault(),t=e.target.querySelector("input#sampleName").value,r=e.target.querySelector("input#noteName").value,localStorage.setItem("samples",JSON.stringify(_objectSpread(_objectSpread({},JSON.parse(localStorage.getItem("samples"))),{},(0,n.Z)({},t||r,r)))),renderSampler(),!1},children:[(0,u.jsx)("input",{type:"text",placeholder:"Enter sample name...",style:{margin:"0.25rlh auto"},id:"sampleName"}),(0,u.jsx)("br",{}),(0,u.jsx)("input",{type:"text",placeholder:"Enter note on synth...",pattern:"[ACDFG]{1}#?[01234567]{1}|[BE]{1}[01234567]{1}",onInvalidCapture:function(e){e.target.setCustomValidity(/[ACDFG]{1}#?[01234567]{1}|[BE]{1}[01234567]{1}/.test(e.target.value)?"":"Note you've provided doesn't exist")},style:{margin:"0.25rlh auto"},id:"noteName",required:!0}),(0,u.jsx)("br",{}),(0,u.jsx)("input",{value:"submit",type:"submit",style:{display:"block",margin:"0.25rlh auto"}})]})]}),(0,u.jsx)("div",{id:"samples"})]}),(0,u.jsx)("div",{id:"synth"})]})}},9618:function(){},8518:function(e){e.exports={main:"page_main__nw1Wk",description:"page_description__lvaOp",code:"page_code__9AfUJ",grid:"page_grid__JZ9Cz",card:"page_card__Cf__u",center:"page_center__NcdcW",logo:"page_logo__ikIZE",content:"page_content___38fW",vercelLogo:"page_vercelLogo__YYFl1",rotate:"page_rotate__xIioM"}}},function(e){e.O(0,[738,97,971,650,744],function(){return e(e.s=6898)}),_N_E=e.O()}]);