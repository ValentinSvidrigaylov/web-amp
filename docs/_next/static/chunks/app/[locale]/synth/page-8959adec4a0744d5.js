(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[272],{2571:function(e,t,r){Promise.resolve().then(r.bind(r,780))},780:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Inner}});var n=r(7022),o=r(599),i=r(116),a=r(8518),s=r.n(a),c=r(7707),l=r(2265),u=r(9691);r(9618);var d=r(7437);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Inner(){var e,t,r,a,p=(0,i.useTranslations)("SynthPage"),f=(0,l.useState)(),m=f[0],g=f[1],h=(0,l.useState)(),v=h[0],y=h[1],b=(0,l.useState)(function(){return function(){}}),w=b[0],x=b[1],k=(0,l.useState)(function(){return function(){}}),A=k[0],S=k[1],_=(0,l.useState)(0),N=_[0],O=_[1],j=(0,l.useState)(0),C=j[0],E=j[1],I=0;c.Do.lookAhead=0;var P=[0,2,1,4,3,5,7,6,9,8,11,10];function increaseOctave(){var e=Number(localStorage.getItem("octave"))||3;e+I>=7||g(e+1)}function decreaseOctave(){var e=Number(localStorage.getItem("octave"))||3;e<1||g(e-1)}function renderSampler(){var e=document.getElementById("samples");e.innerHTML="";var t=JSON.parse(localStorage.getItem("samples"))||(localStorage.setItem("samples",JSON.stringify({})),{});for(var r in t){var n=document.createElement("div"),o=document.createElement("h3");o.style.cssText="text-align: center",o.textContent=r;var i=document.createElement("div");i.style.cssText="width: 80%; height: 8rlh; border: 2px dashed var(--nav-background); display: block; margin: 0.6rlh auto;",n.appendChild(o),n.appendChild(i),e.appendChild(n)}}return(0,l.useEffect)(function(){c.BL();var n=new c.Z4({urls:{C4:"C4.mp3","D#4":"Ds4.mp3","F#4":"Fs4.mp3",A4:"A4.mp3"},release:1,baseUrl:"./samples/piano/"}).toDestination();return document.getElementById("keysValue"),document.getElementById("octaveValue"),t=(e=JSON.parse(localStorage.getItem("notes"))||(localStorage.setItem("notes",JSON.stringify(["C","D","C#","E","D#","F","G","F#","A","G#","B","A#"])),["C","D","C#","E","D#","F","G","F#","A","G#","B","A#"])).filter(function(e){return!e.includes("#")}),e.filter(function(e){return e.includes("#")}),r=document.querySelector("div#synth"),S(function(){return function(e){}}),x(function(){return function(i,s,l){switch(c.BL(),void 0!=l&&(r.innerHTML="",a=null),l){case"piano":n=new c.Z4({urls:{C4:"C4.mp3","D#4":"Ds4.mp3","F#4":"Fs4.mp3",A4:"A4.mp3"},release:1,baseUrl:"./samples/piano/"}).toDestination().toDestination(),I=0,(a=document.createElementNS("http://www.w3.org/2000/svg","svg")).id="synthsvg";for(var d=0;d<s;d++)!function(r){var s=void 0;e[r%12].includes("#")?((s=document.createElementNS("http://www.w3.org/2000/svg","rect")).setAttribute("width",35),s.setAttribute("height",180),s.setAttribute("stroke","black"),s.setAttribute("stroke-width",2.5),s.setAttribute("fill","black"),s.classList.add("semi-tone"),s.setAttribute("x",385*I+55*e.slice(0,e.indexOf(e[P[r%12]])).filter(function(e){return!e.includes("#")}).length-17.5+1.25)):((s=document.createElementNS("http://www.w3.org/2000/svg","rect")).setAttribute("width",55),s.setAttribute("height",280),s.setAttribute("stroke","black"),s.setAttribute("stroke-width",2.5),s.setAttribute("fill","white"),s.classList.add("tone"),s.setAttribute("rx",10),s.setAttribute("x",385*I+55*t.indexOf(e[r%12])+1.25)),s.setAttribute("y",1.25),a.appendChild(s);var l=I;i=Number(i),s.onmousedown=function(t){t.stopPropagation(),void 0==s.getAttribute("isPressed")&&(s.setAttribute("isPressed",""),n.triggerAttack("".concat(e[(0,o.Z)(a.children).indexOf(s)-12*l])+"".concat(i+l),c.Do.currentTime),a.children[(0,o.Z)(a.children).indexOf(s)].style.transform="rotateX(15deg)")},s.onmouseup=function(t){t.stopPropagation(),void 0!=s.getAttribute("isPressed")&&(s.removeAttribute("isPressed"),n.triggerRelease("".concat(e[(0,o.Z)(a.children).indexOf(s)-12*l])+"".concat(i+l),c.Do.currentTime),a.children[(0,o.Z)(a.children).indexOf(s)].style.transform="")},s.onmouseleave=function(t){t.stopPropagation(),n.triggerRelease("".concat(e[(0,o.Z)(a.children).indexOf(s)-12*l])+"".concat(i+l),c.Do.currentTime),a.children[(0,o.Z)(a.children).indexOf(s)].style.transform=""},s.ontouchstart=function(e){e.stopPropagation(),e.preventDefault(),s.onmousedown(e)},s.ontouchend=s.ontouchcancel=function(e){e.stopPropagation(),e.preventDefault(),s.onmouseup(e)},(r+1)%12==0&&0!=r&&I++}(d);a.setAttribute("viewBox","0 0 ".concat(55*(0,o.Z)(a.children).filter(function(e){return e.classList.contains("tone")}).length+5," ").concat(285)),r.appendChild(a),window.onkeydown=function(e){var t=JSON.parse(localStorage.getItem("octavechangekeys"))||[];if((0,u.d)(t,e.key.toLowerCase()).length>0)e.key.toLowerCase()==t[0]?increaseOctave():decreaseOctave();else{e.stopPropagation();var r=JSON.parse(localStorage.getItem("keys"))||(localStorage.setItem("keys",JSON.stringify(["q","w","e","r","t","y","u","i","o","p","[","]"])),["q","w","e","r","t","y","u","i","o","p","[","]"]),n=(0,u.d)(r,e.key.toLowerCase());if(void 0!=n)for(var o=0;o<n.length;o++){var i=Number(n[o])-Number(n[o])%12+P[n[o]%12];a.children[i].dispatchEvent(new Event("mousedown"))}}},window.onkeyup=function(e){e.stopPropagation();var t=JSON.parse(localStorage.getItem("keys"))||(localStorage.setItem("keys",JSON.stringify(["q","w","e","r","t","y","u","i","o","p","[","]"])),JSON.stringify(["q","w","e","r","t","y","u","i","o","p","[","]"])),r=(0,u.d)(t,e.key.toLowerCase());if(void 0!=r)for(var n=0;n<r.length;n++){var o=Number(r[n])-Number(r[n])%12+P[r[n]%12];a.children[o].dispatchEvent(new Event("mouseup")),a.children[o].style.transform=""}};break;case"drums":n=new c.Z4({urls:{F3:"F3.wav",G3:"G3.wav",A3:"A3.wav",B3:"B3.wav",C4:"C4.wav",D4:"D4.wav",F4:"F4.wav","F#4":"Fs4.wav",G4:"G4.wav",C5:"C5.wav",A5:"A5.wav"},release:1,baseUrl:"./samples/drums/"}).toDestination().toDestination(),I=0,(a=document.createElementNS("http://www.w3.org/2000/svg","svg")).id="synthsvg";for(var p=0;p<s;p++)!function(r){var s=void 0;e[r%12].includes("#")?((s=document.createElementNS("http://www.w3.org/2000/svg","rect")).setAttribute("width",35),s.setAttribute("height",180),s.setAttribute("stroke","black"),s.setAttribute("stroke-width",2.5),s.setAttribute("fill","black"),s.classList.add("semi-tone"),s.setAttribute("x",385*I+55*e.slice(0,e.indexOf(e[P[r%12]])).filter(function(e){return!e.includes("#")}).length-17.5+1.25)):((s=document.createElementNS("http://www.w3.org/2000/svg","rect")).setAttribute("width",55),s.setAttribute("height",280),s.setAttribute("stroke","black"),s.setAttribute("stroke-width",2.5),s.setAttribute("fill","white"),s.classList.add("tone"),s.setAttribute("rx",10),s.setAttribute("x",385*I+55*t.indexOf(e[r%12])+1.25)),s.setAttribute("y",1.25),a.appendChild(s);var l=I;i=Number(i),s.onmousedown=function(t){t.stopPropagation(),void 0==s.getAttribute("isPressed")&&(s.setAttribute("isPressed",""),n.triggerAttack("".concat(e[(0,o.Z)(a.children).indexOf(s)-12*l])+"".concat(i+l),c.Do.currentTime),a.children[(0,o.Z)(a.children).indexOf(s)].style.transform="rotateX(15deg)")},s.onmouseup=function(t){t.stopPropagation(),void 0!=s.getAttribute("isPressed")&&(s.removeAttribute("isPressed"),n.triggerRelease("".concat(e[(0,o.Z)(a.children).indexOf(s)-12*l])+"".concat(i+l),c.Do.currentTime),a.children[(0,o.Z)(a.children).indexOf(s)].style.transform="")},s.onmouseleave=function(t){t.stopPropagation(),n.triggerRelease("".concat(e[(0,o.Z)(a.children).indexOf(s)-12*l])+"".concat(i+l),c.Do.currentTime),a.children[(0,o.Z)(a.children).indexOf(s)].style.transform=""},s.ontouchstart=function(e){e.stopPropagation(),e.preventDefault(),s.onmousedown(e)},s.ontouchend=s.ontouchcancel=function(e){e.stopPropagation(),e.preventDefault(),s.onmouseup(e)},(r+1)%12==0&&0!=r&&I++}(p);a.setAttribute("viewBox","0 0 ".concat(55*(0,o.Z)(a.children).filter(function(e){return e.classList.contains("tone")}).length+5," ").concat(285)),r.appendChild(a),window.onkeydown=function(e){var t=JSON.parse(localStorage.getItem("octavechangekeys"))||[];if((0,u.d)(t,e.key.toLowerCase()).length>0)e.key.toLowerCase()==t[0]?increaseOctave():decreaseOctave();else{e.stopPropagation();var r=JSON.parse(localStorage.getItem("keys"))||(localStorage.setItem("keys",JSON.stringify(["q","w","e","r","t","y","u","i","o","p","[","]"])),["q","w","e","r","t","y","u","i","o","p","[","]"]),n=(0,u.d)(r,e.key.toLowerCase());if(void 0!=n)for(var o=0;o<n.length;o++){var i=Number(n[o])-Number(n[o])%12+P[n[o]%12];a.children[i].dispatchEvent(new Event("mousedown"))}}},window.onkeyup=function(e){e.stopPropagation();var t=JSON.parse(localStorage.getItem("keys"))||(localStorage.setItem("keys",JSON.stringify(["q","w","e","r","t","y","u","i","o","p","[","]"])),JSON.stringify(["q","w","e","r","t","y","u","i","o","p","[","]"])),r=(0,u.d)(t,e.key.toLowerCase());if(void 0!=r)for(var n=0;n<r.length;n++){var o=Number(r[n])-Number(r[n])%12+P[r[n]%12];a.children[o].dispatchEvent(new Event("mouseup")),a.children[o].style.transform=""}}}}}),localStorage&&(g(Number(localStorage.getItem("octave"))||3),y(Number(localStorage.getItem("keysLength"))||12)),function(){window.onkeydown=null,window.onkeyup=null,n.releaseAll(0)}},[]),(0,l.useEffect)(function(){void 0!=m&&void 0!=w&&(localStorage.setItem("octave",m),w(m,v,"piano"))},[m]),(0,l.useEffect)(function(){void 0!=v&&void 0!=w&&(localStorage.setItem("keysLength",v),A(m),w(m,v,"piano"))},[v]),(0,l.useEffect)(function(){w(m,v)},[w]),(0,l.useEffect)(function(){renderSampler()},[]),(0,d.jsxs)("main",{className:s().main,children:[(0,d.jsx)("div",{className:[s().description,"center-block text-center m-2"],style:{lineHeight:"3rem"},children:(0,d.jsxs)("span",{children:[p("page_description"),(0,d.jsx)("h5",{children:(0,d.jsx)("a",{href:"https://tonejs.github.io/",target:"blank",children:"tone js"})})]})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{children:p("presets_label")}),"\xa0",(0,d.jsxs)("select",{name:"presets",id:"presets",onChangeCapture:function(e){w(localStorage.getItem("octave")||3,localStorage.getItem("keysLength")||12,e.target.value)},children:[(0,d.jsx)("option",{value:"piano",children:p("presets_piano")}),(0,d.jsx)("option",{value:"drums",children:p("presets_drums")})]}),(0,d.jsx)("br",{}),(0,d.jsx)("span",{className:s().description,children:p("presets_hint")})]}),(0,d.jsxs)("div",{className:"center-block container",children:[(0,d.jsxs)("h2",{id:"octaveValue",className:"text-center",children:[p("leastoctave_label"),": ",m]}),(0,d.jsxs)("div",{className:"row",children:[(0,d.jsx)("div",{className:"col",children:(0,d.jsxs)("button",{id:"octave+",className:"center-block",onClick:increaseOctave,children:[p("octave_label"),"+"]})}),(0,d.jsx)("div",{className:"col",children:(0,d.jsxs)("button",{id:"octave-",className:"center-block",onClick:decreaseOctave,children:[p("octave_label"),"-"]})})]})]}),(0,d.jsxs)("div",{className:"center-block container",children:[(0,d.jsxs)("h2",{id:"keysValue",className:"text-center",children:[p("keys_label"),": ",v]}),(0,d.jsxs)("div",{className:"row",children:[(0,d.jsx)("div",{className:"col",children:(0,d.jsx)("button",{id:"key+",className:"center-block",onClick:function(){v>=48||y(v+1)},children:p("addkey_label")})}),(0,d.jsx)("div",{className:"col",children:(0,d.jsx)("button",{id:"key-",className:"center-block",onClick:function(){v<1||y(v-1)},children:p("removekey_label")})})]})]}),(0,d.jsxs)("div",{id:"sampler",style:{border:"3px solid black",borderRadius:"15px",background:"color-mix(in srgb, var(--background) 90%, white)",margin:"1.5rlh 0",padding:"0.5rlh",width:"80vw"},children:[(0,d.jsx)("span",{style:{textAlign:"center",display:"block",margin:"0.4rlh auto"},children:p("drummachine_label")}),(0,d.jsxs)("div",{id:"samplerouter",style:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},children:[(0,d.jsxs)("div",{id:"BPMTapper",children:[(0,d.jsx)("input",{onChange:function(e){O(e.target.value)},value:N}),(0,d.jsx)("button",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",border:"3px solid var(--nav-background)",borderRadius:"10%",height:"6rlh",width:"6rlh",textAlign:"center",verticalAlign:"middle"},onClick:function(e){C&&O(Math.round(6e4/(e.timeStamp-C))),E(e.timeStamp)},children:p("tapper_label")})]}),(0,d.jsxs)("form",{onSubmitCapture:function(e){var t,r;return e.preventDefault(),t=e.target.querySelector("input#sampleName").value,r=e.target.querySelector("input#noteName").value,localStorage.setItem("samples",JSON.stringify(_objectSpread(_objectSpread({},JSON.parse(localStorage.getItem("samples"))),{},(0,n.Z)({},t||r,r)))),renderSampler(),!1},children:[(0,d.jsx)("input",{onChange:function(e){},type:"text",placeholder:p("sample_name_placeholder"),style:{margin:"0.25rlh auto"},id:"sampleName"}),(0,d.jsx)("br",{}),(0,d.jsx)("input",{onChange:function(e){},type:"text",placeholder:p("sample_note_placeholder"),pattern:"[ACDFG]{1}#?[01234567]{1}|[BE]{1}[01234567]{1}",onInvalidCapture:function(e){e.target.setCustomValidity(/[ACDFG]{1}#?[01234567]{1}|[BE]{1}[01234567]{1}/.test(e.target.value)?"":p("invalid_sample_note"))},style:{margin:"0.25rlh auto"},id:"noteName",required:!0}),(0,d.jsx)("br",{}),(0,d.jsx)("input",{onChange:function(e){},value:p("sample_submit"),type:"submit",style:{display:"block",margin:"0.25rlh auto"}})]})]}),(0,d.jsx)("div",{id:"samples"})]}),(0,d.jsx)("div",{id:"synth"})]})}},9691:function(e,t,r){"use strict";r.d(t,{d:function(){return getKeysByValue}});var n=r(599);function getKeysByValue(e,t){return Object.keys(e).filter(function(r){return e[r]===t}).map(function(e){return Number(e)})}Array.prototype.move=function(e,t){this.splice(t,0,this.splice(e,1)[0])},Array.prototype.toMoved=function(e,t){var r=(0,n.Z)(this);return r.splice(t,0,r.splice(e,1)[0]),r},Array.prototype.insert=function(e,t){this.splice(t,0,e)},Array.prototype.equals,Array.prototype.equals=function(e){if(!e)return!1;if(e===this)return!0;if(this.length!=e.length)return!1;for(var t=0,r=this.length;t<r;t++)if(this[t]instanceof Array&&e[t]instanceof Array){if(!this[t].equals(e[t]))return!1}else if(this[t]!=e[t])return!1;return!0},Object.defineProperty(Array.prototype,"equals",{enumerable:!1}),Number.prototype.fromExponent=function(){var e=String(this).split(/[eE]/);if(1==e.length)return e[0];var t="",r=e[0].replace(".",""),n=Number(e[1])+1;if(n<0){for(t=(this<0?"-":"")+"0.";n++;)t+="0";return t+r.replace(/^\-/,"")}for(n-=r.length;n--;)t+="0";return r+t},Number.prototype.clamp=function(e,t){return Math.min(Math.max(this,e),t)}},9618:function(){},8518:function(e){e.exports={main:"page_main__nw1Wk",description:"page_description__lvaOp",code:"page_code__9AfUJ",grid:"page_grid__JZ9Cz",card:"page_card__Cf__u",center:"page_center__NcdcW",logo:"page_logo__ikIZE",content:"page_content___38fW",vercelLogo:"page_vercelLogo__YYFl1",rotate:"page_rotate__xIioM"}},7022:function(e,t,r){"use strict";function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{Z:function(){return _defineProperty}})},599:function(e,t,r){"use strict";function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function _toConsumableArray(e){return function(e){if(Array.isArray(e))return _arrayLikeToArray(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}r.d(t,{Z:function(){return _toConsumableArray}})}},function(e){e.O(0,[735,707,971,650,744],function(){return e(e.s=2571)}),_N_E=e.O()}]);